<%= turbo_frame_tag "editor-replacable" do %>
<%= form_with(model: @landing_page, url: update_business_details_landing_page_path(@landing_page), method: :patch, class: "landing-page-form") do |form| %>
<% if @landing_page.errors.any? %>
  <div class="form-errors">
    <h2><%= pluralize(@landing_page.errors.count, "error") %> prohibited this landing_page from being saved:</h2>
    <ul>
      <% @landing_page.errors.each do |error| %>
        <li><%= error.full_message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="form-field">
  <%= form.label :title, class: "form-label" %>
  <%= form.text_field :title, class: "form-input" %>
</div>

<fieldset class="fieldset-group">
  <legend>Business Info</legend>
  <div class="form-field">
    <%= form.label :business_name, "Business Name", class: "form-label" %>
    <%= form.text_field :business_name, class: "form-input" %>
  </div>

  <div class="form-field">
    <%= form.label :business_description, "Business Description", class: "form-label" %>
    <%= form.text_area :business_description, class: "form-input", rows: 4 %>
  </div>

  <div class="form-field">
    <%= form.label :target_audience, "Target Audience", class: "form-label" %>
    <%= form.text_field :target_audience, class: "form-input" %>
  </div>

  <div class="form-field">
    <%= form.label :offer, "Offer", class: "form-label" %>
    <%= form.text_field :offer, class: "form-input" %>
  </div>
  <div class="form-field">
      <%= form.label :google_maps_url, "Google Maps URL", class: "form-label" %>
      <div style="display: flex; gap: 10px;">
      <%= form.text_field :google_maps_url, class: "form-input", style: "flex-grow: 1;" %>
      <%= form.button "Update Reviews Only", 
          formaction: update_reviews_landing_page_path(@landing_page),
          formmethod: "patch",
          class: "secondary-button",
          style: "white-space: nowrap;" %>
    </div>
    <p class="help-text">Paste your map link here to fetch fresh reviews.</p>
  </div>



    <div class="form-field" data-controller="selling-points">
      <label class="form-label">Selling Points</label>
      <%= hidden_field_tag 'landing_page[selling_points][]', '' %>
      <div data-selling-points-target="list">
        <% (@landing_page.selling_points || []).each do |point| %>
          <div class="selling-point-item">
            <%= text_field_tag 'landing_page[selling_points][]', point, class: "form-input", placeholder: "Enter selling point" %>
            <button type="button" data-action="click->selling-points#remove" class="remove-btn">Remove</button>
          </div>
        <% end %>
      </div>
      <button type="button" data-action="click->selling-points#add" class="add-btn">+ Add Selling Point</button>
    </div>

    <div class="form-field" data-controller="keywords">
      <label class="form-label">Keywords</label>
      <%= hidden_field_tag 'landing_page[keywords][]', '' %>
      <div data-keywords-target="list">
        <% (@landing_page.keywords || []).each do |keyword| %>
          <div class="keyword-item">
            <%= text_field_tag 'landing_page[keywords][]', keyword, class: "form-input", placeholder: "Enter keyword" %>
            <button type="button" data-action="click->keywords#remove" class="remove-btn">Remove</button>
          </div>
        <% end %>
      </div>
      <button type="button" data-action="click->keywords#add" class="add-btn">+ Add Keyword</button>
    </div>
  </fieldset>


  <div class="form-actions">
    <%= form.submit "Update Business Details", class: "submit-button" %>
  </div>
<% end %>

<style>
  .landing-page-form {
    width: 100%;
  }

  .form-errors {
    background-color: #fef2f2;
    color: #991b1b;
    padding: 16px;
    margin-bottom: 24px;
    border-radius: 8px;
    border: 1px solid #fecaca;
  }

  .form-errors ul {
    margin: 8px 0 0 20px;
  }

  .form-field {
    margin-bottom: 24px;
  }

  .form-label {
    display: block;
    margin-bottom: 8px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #374151;
  }

  .form-input {
    display: block;
    width: 100%;
    padding: 10px 14px;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 0.9375rem;
    background-color: #ffffff;
  }

  .form-input:focus {
    outline: none;
    border-color: #2563eb;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
  }

  .form-color-input {
    display: block;
    width: 80px;
    height: 40px;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    cursor: pointer;
  }

  .form-file-input {
    display: block;
    margin-top: 8px;
    font-size: 0.875rem;
  }

  .current-file {
    margin-top: 8px;
    font-size: 0.8125rem;
    color: #6b7280;
  }

  .fieldset-group {
    margin-bottom: 32px;
    padding: 20px;
    background-color: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
  }

  .fieldset-group legend {
    font-weight: 600;
    font-size: 0.9375rem;
    color: #1a1a1a;
    padding: 0 8px;
  }

  .form-actions {
    position: sticky;
    bottom: 0;
    background-color: #ffffff;
    padding: 20px 0;
    border-top: 1px solid #e5e7eb;
    z-index: 10;
    margin-top: 32px;
  }

  .submit-button {
    width: 100%;
    padding: 12px 24px;
    background-color: #2563eb;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9375rem;
    font-weight: 500;
  }

  .selling-point-item,
  .keyword-item {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
  }

  .selling-point-item .form-input,
  .keyword-item .form-input {
    flex: 1;
    margin-bottom: 0;
  }

  .remove-btn {
    padding: 10px 16px;
    background-color: #ef4444;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
  }

  .add-btn {
    padding: 10px 16px;
    background-color: #10b981;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    margin-top: 8px;
  }
</style>
<% end %>
