<%= turbo_frame_tag "editor-replacable" do %>
<%= form_with(model: @landing_page, class: "landing-page-form") do |form| %>
  <% if @landing_page.errors.any? %>
    <div class="form-errors">
      <h2><%= pluralize(@landing_page.errors.count, "error") %> prohibited this @landing_page from being saved:</h2>
      <ul>
        <% @landing_page.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-field">
    <%= form.label :title, class: "form-label" %>
    <%= form.text_field :title, class: "form-input" %>
  </div>

  <fieldset class="fieldset-group">
    <legend>Colors</legend>
    <div class="color-grid">
      <div class="color-field">
        <%= color_field_tag 'landing_page[styles][colors][primaryColor]', @landing_page.styles.dig('colors', 'primaryColor'), class: "form-color-input" %>
        <%= label_tag 'landing_page[styles][colors][primaryColor]', "Primary", class: "color-label" %>
      </div>
      <div class="color-field">
        <%= color_field_tag 'landing_page[styles][colors][secondaryColor]', @landing_page.styles.dig('colors', 'secondaryColor'), class: "form-color-input" %>
        <%= label_tag 'landing_page[styles][colors][secondaryColor]', "Secondary", class: "color-label" %>
      </div>
      <div class="color-field">
        <%= color_field_tag 'landing_page[styles][colors][lightColor]', @landing_page.styles.dig('colors', 'lightColor'), class: "form-color-input" %>
        <%= label_tag 'landing_page[styles][colors][lightColor]', "Light", class: "color-label" %>
      </div>
      <div class="color-field">
        <%= color_field_tag 'landing_page[styles][colors][darkColor]', @landing_page.styles.dig('colors', 'darkColor'), class: "form-color-input" %>
        <%= label_tag 'landing_page[styles][colors][darkColor]', "Dark", class: "color-label" %>
      </div>
    </div>
  </fieldset>

  <fieldset class="fieldset-group">
    <legend>Fonts</legend>
    <div class="form-field">
      <%= label_tag 'landing_page[styles][fonts][primaryFont]', "Primary Font", class: "form-label" %>
      <%= select_tag 'landing_page[styles][fonts][primaryFont]',
          options_for_select(['Tageschrfit','Oswald','Barrio'], @landing_page.styles.dig('fonts','primaryFont')),
          class: "form-input" %>
    </div>
    <div class="form-field">
      <%= label_tag 'landing_page[styles][fonts][secondaryFont]', "Secondary Font", class: "form-label" %>
      <%= text_field_tag 'landing_page[styles][fonts][secondaryFont]', @landing_page.styles.dig('fonts', 'secondaryFont'), class: "form-input" %>
    </div>
  </fieldset>


  <fieldset class="fieldset-group">
    <legend>Media Assets</legend>

    <div class="file-upload-field">
      <%= form.label :logo, class: "form-label" %>
      <div class="file-upload-wrapper">
        <%= form.file_field :logo, class: "file-input", accept: "image/*" %>
        <div class="file-upload-display">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
          </svg>
          <span class="file-upload-text">Choose file</span>
        </div>
      </div>
      <% if @landing_page.logo.attached? %>
        <p class="current-file">Current: <%= @landing_page.logo.filename %></p>
      <% end %>
    </div>

    <div class="file-upload-field">
      <%= form.label :hero_video, "Hero video", class: "form-label" %>
      <div class="file-upload-wrapper">
        <%= form.file_field :hero_video, class: "file-input", accept: "video/*" %>
        <div class="file-upload-display">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
          </svg>
          <span class="file-upload-text">Choose file</span>
        </div>
      </div>
      <% if @landing_page.hero_video.attached? %>
        <p class="current-file">Current: <%= @landing_page.hero_video.filename %></p>
      <% end %>
    </div>

    <div class="file-upload-field">
      <%= form.label :background_image, "Background image", class: "form-label" %>
      <div class="file-upload-wrapper">
        <%= form.file_field :background_image, class: "file-input", accept: "image/*" %>
        <div class="file-upload-display">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
          </svg>
          <span class="file-upload-text">Choose file</span>
        </div>
      </div>
      <% if @landing_page.background_image.attached? %>
        <p class="current-file">Current: <%= @landing_page.background_image.filename %></p>
      <% end %>
    </div>
  </fieldset>

  <div class="form-actions">
    <div class="form-actions-group">
      <%= form.submit "Update Styles", class: "submit-button" %>
      <%= link_to @landing_page, target: "_blank", class: "view-button", title: "View Landing Page" do %>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
        </svg>
      <% end %>
    </div>
  </div>
<% end %>

<style>
  .landing-page-form {
    width: 100%;
  }

  .form-errors {
    background-color: #fef2f2;
    color: #991b1b;
    padding: 16px;
    margin-bottom: 24px;
    border-radius: 8px;
    border: 1px solid #fecaca;
  }

  .form-errors ul {
    margin: 8px 0 0 20px;
  }

  .form-field {
    margin-bottom: 24px;
  }

  .form-label {
    display: block;
    margin-bottom: 8px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #374151;
  }

  .form-input {
    display: block;
    width: 100%;
    padding: 10px 14px;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 0.9375rem;
    background-color: #ffffff;
  }

  .form-input:focus {
    outline: none;
    border-color: #2563eb;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
  }

  .color-grid {
    display: flex;
    gap: 24px;
    justify-content: flex-start;
  }

  .color-field {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }

  .form-color-input {
    width: 64px;
    height: 64px;
    border: 3px solid #e5e7eb;
    border-radius: 50%;
    cursor: pointer;
    padding: 0;
  }

  .color-label {
    font-size: 0.75rem;
    font-weight: 500;
    color: #6b7280;
    text-align: center;
  }

  .file-upload-field {
    margin-bottom: 20px;
  }

  .file-upload-wrapper {
    position: relative;
    margin-top: 8px;
  }

  .file-input {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    z-index: 2;
  }

  .file-upload-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 16px 24px;
    background-color: #ffffff;
    border: 2px dashed #d1d5db;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    color: #6b7280;
  }

  .file-upload-display:hover {
    border-color: #2563eb;
    background-color: #f9fafb;
    color: #2563eb;
  }

  .file-upload-text {
    font-size: 0.875rem;
    font-weight: 500;
  }

  .current-file {
    margin-top: 8px;
    font-size: 0.8125rem;
    color: #059669;
    font-weight: 500;
  }

  .fieldset-group {
    margin-bottom: 32px;
    padding: 20px;
    background-color: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
  }

  .fieldset-group legend {
    font-weight: 600;
    font-size: 0.9375rem;
    color: #1a1a1a;
    padding: 0 8px;
  }

  .form-actions {
    position: sticky;
    bottom: 0;
    background-color: #ffffff;
    padding: 20px 0;
    border-top: 1px solid #e5e7eb;
    z-index: 10;
    margin-top: 32px;
  }

  .form-actions-group {
    display: flex;
    gap: 12px;
    align-items: center;
  }

  .submit-button {
    flex: 1;
    padding: 12px 24px;
    background-color: #2563eb;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9375rem;
    font-weight: 500;
  }

  .view-button {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px;
    background-color: #f3f4f6;
    color: #374151;
    border-radius: 6px;
    text-decoration: none;
  }
</style>
<% end %>
